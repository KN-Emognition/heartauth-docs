flowchart TB
    start([Start]):::startEnd
    created([Created]):::startEnd
    pending([Pending])
    decision{{Model-API Decision}}:::decision
    approved([Approved]):::terminal
    denied([Denied]):::error
    expired([Expired]):::expired
    notfound([Not&nbsp;Found]):::tech
    finish((End)):::startEnd

    start --> created 
    created -->|send for ECG verification| pending
    pending -->|API response| decision
    decision -->|ecg verification successful| approved
    decision -->|ecg verification failed| denied

    created -.->|TTL / timeout| expired
    pending -.->|TTL / timeout| expired
    approved -.->|retention cleanup| expired
    denied -.->|retention cleanup| expired

    expired --> finish

    start -.->|lookup: missing key| notfound
